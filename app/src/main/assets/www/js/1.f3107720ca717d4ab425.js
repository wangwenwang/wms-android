webpackJsonp([1],{"9bBU":function(t,e,o){o("mClu");var a=o("FeBl").Object;t.exports=function(t,e,o){return a.defineProperty(t,e,o)}},C4MV:function(t,e,o){t.exports={default:o("9bBU"),__esModule:!0}},bOdI:function(t,e,o){"use strict";e.__esModule=!0;var a,n=o("C4MV"),s=(a=n)&&a.__esModule?a:{default:a};e.default=function(t,e,o){return e in t?(0,s.default)(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}},mClu:function(t,e,o){var a=o("kM2E");a(a.S+a.F*!o("+E39"),"Object",{defineProperty:o("evD5").f})},"v/oy":function(t,e,o){"use strict";(function(t){var a=o("bOdI"),n=o.n(a);e.a={name:"CycleCount_Submit",data:function(){var t;return t={Loc:"",CountNo:"",Sku:"",StorerKey:"",Descr:"",Susr2:"",input8:"",input9:"",input10:"",descr:"",Lottable02:"",Lottable03:"",Lottable04:"",Lottable05:"",Lottable09:"",Lottable10:"",Lot:"",Qty:""},n()(t,"Susr2",""),n()(t,"QtyCount",""),n()(t,"PID",""),n()(t,"CurrIndex",1),n()(t,"CycleCount_RFCountQry",[]),n()(t,"CycleCount_RFCountQry_HasIndex",[]),n()(t,"totalData",0),n()(t,"nowData",1),n()(t,"tipsHide",!1),n()(t,"msg",""),n()(t,"isShowDetail",!0),n()(t,"CycleCounted",0),n()(t,"inputFocus",""),t},created:function(){if(console.log(this.$store.state.CycleCount_RFCountQry),this.$store.state.CycleCount_RFCountQry.length){var t=this.$store.state.CycleCount_RFCountQry;for(var e in this.CycleCount_RFCountQry=t,this.CycleCount_RFCountQry)this.CycleCount_RFCountQry[e].CurrIndex=parseInt(e)+1}var o=this.$route.query.CountNo;this.CountType=this.$route.query.CountType;var a=this.$route.query.Loc;if("PSku"==this.CountType&&(this.isShowDetail=!1),this.totalData=t.length,this.Loc=a,this.CountNo=o,0==t.length)return this.msg="没有数据",void this.tipsShow("Loc");this.nowData=1,this.SwitchingData()},mounted:function(){this.$refs.QtyCount.focus(),window.QRScanAjax=this.QRScanAjax,t("input").attr("maxlength","50")},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.confirmOnclick()},previous:function(){this.nowData<=1||(this.nowData--,this.SwitchingData())},next:function(){this.nowData>=this.CycleCount_RFCountQry.length&&(this.nowData=0),this.nowData++,this.SwitchingData(),this.$refs.QtyCount.focus()},SwitchingData:function(){var t=this,e=this.CycleCount_RFCountQry,o=(this.$route.query.CountNo,this.nowData-1);if(this.Sku=e[o].Sku,this.StorerKey=e[o].StorerKey,this.Descr=e[o].Descr,this.Lottable02=e[o].Lottable02,this.Lottable03=e[o].Lottable03,this.Lottable04=e[o].Lottable04,this.Lottable05=e[o].Lottable05,this.Lottable09=e[o].Lottable09,this.Lottable10=e[o].Lottable10,this.Lot=e[o].Lot,this.Qty=e[o].Qty,this.Susr2=e[o].Susr2,this.PID=e[o].PID,this.CurrIndex=e[o].CurrIndex,t.$store.state.StateOfGoodsData.length){t.StateOfGoodsData=t.$store.state.StateOfGoodsData;for(var a=0;a<t.StateOfGoodsData.length;a++)e[o].Lottable02==t.StateOfGoodsData[a].Code&&(t.Lottable02=t.StateOfGoodsData[a].Descr)}else{var n=this.HOST+"GoodsStatus.do";t.httpRequest(n,{Code:"",Descr:""},function(a){console.log(a),t.StateOfGoodsData=a.data.data,t.$store.state.StateOfGoodsData=a.data.data;for(var n=0;n<t.StateOfGoodsData.length;n++)e[o].Lottable02==t.StateOfGoodsData[n].Code&&(t.Lottable02=t.StateOfGoodsData[n].Descr)})}},confirmOnclick:function(){var t=this;if(""==this.QtyCount)this.msg="盘点数量不能为空",t.tipsShow("QtyCount"),t.inputFocus="QtyCount";else if(this.CountNo&&this.StorerKey&&this.Sku&&this.Loc){var e=this.HOST+"RFCountSave.do";console.log("接口："+e);var o={CountNo:this.CountNo,CountType:this.CountType,UserID:"admin",StorerKey:this.StorerKey,Sku:this.Sku,Loc:this.Loc,Lottable02:this.Lottable02,Lottable03:this.Lottable03,Lottable04:this.Lottable04,Lottable05:this.Lottable05,Lottable09:this.Lottable09,Lottable10:this.Lottable10,Lot:this.Lot,PID:this.PID,QtyCount:this.QtyCount,Qty:this.Qty};this.httpRequest(e,o,function(e){t.CycleCounted++,t.CycleCounted==t.totalData?(t.tipsHide=!1,t.$router.push({name:"CycleCount"})):(t.QtyCount="",t.CycleCount_RFCountQry.splice(t.nowData-1,1),console.log("删除了第"+(parseInt(t.nowData)-1)+"元素"),t.nowData--,t.next())},"QtyCount")}else this.msg="盘点单号、客户代码、商品代码、库位。都不能为空。",t.tipsShow("CountNo"),t.inputFocus="CountNo"},sendParams:function(){this.$router.push({name:"CycleCount",query:{}})}}}}).call(e,o("7t+N"))},yOHO:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("v/oy"),n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"CycleCount_Submit"},[o("header",[o("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.sendParams}}),o("span",[t._v("盘点")]),o("i",{staticClass:"iconfont icon-saoma",on:{click:t.scan}})]),t._v(" "),o("div",{staticClass:"container"},[o("div",{staticClass:"Pallet"},[o("div",[o("span",[t._v("库位")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.Loc,expression:"Loc"}],attrs:{readonly:""},domProps:{value:t.Loc},on:{input:function(e){e.target.composing||(t.Loc=e.target.value)}}})]),t._v(" "),o("div",[o("span",[t._v("托盘单号")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.CountNo,expression:"CountNo"}],attrs:{readonly:""},domProps:{value:t.CountNo},on:{input:function(e){e.target.composing||(t.CountNo=e.target.value)}}})])]),t._v(" "),o("div",[o("div",[o("span",[t._v("商品代码")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.Sku,expression:"Sku"}],attrs:{readonly:""},domProps:{value:t.Sku},on:{input:function(e){e.target.composing||(t.Sku=e.target.value)}}})]),t._v(" "),o("div",[o("span",[t._v("客户代码")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.StorerKey,expression:"StorerKey"}],attrs:{readonly:""},domProps:{value:t.StorerKey},on:{input:function(e){e.target.composing||(t.StorerKey=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"goodsName"},[o("span",[t._v("商品名称")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Descr,expression:"Descr"}],attrs:{readonly:""},domProps:{value:t.Descr},on:{input:function(e){e.target.composing||(t.Descr=e.target.value)}}})]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDetail,expression:"isShowDetail"}],staticClass:"property"},[o("span",[t._v("批次属性")]),t._v(" "),o("textarea",{attrs:{readonly:""}},[t._v("货物状态:"+t._s(t.Lottable02)+"\n生产批号:"+t._s(t.Lottable03)+"\n生产日期:"+t._s(t.Lottable04)+"\n到期日期:"+t._s(t.Lottable05)+"\n收货日期:"+t._s(t.Lottable09)+"\n收货单号:"+t._s(t.Lottable10)+"\n系统批次:"+t._s(t.Lot)+"\n\t\t\t\t")])]),t._v(" "),o("div",[o("div",[o("span",[t._v("系统数量")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.Qty,expression:"Qty"}],attrs:{readonly:""},domProps:{value:t.Qty},on:{input:function(e){e.target.composing||(t.Qty=e.target.value)}}})]),t._v(" "),o("div",[o("span",[t._v("单位")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.Susr2,expression:"Susr2"}],attrs:{readonly:""},domProps:{value:t.Susr2},on:{input:function(e){e.target.composing||(t.Susr2=e.target.value)}}})])]),t._v(" "),o("div",[o("div",[o("span",[t._v("盘点数量")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.QtyCount,expression:"QtyCount"}],ref:"QtyCount",staticClass:"writable",domProps:{value:t.QtyCount},on:{change:function(e){t.toUppercase("QtyCount")},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmOnclick(e):null},input:function(e){e.target.composing||(t.QtyCount=e.target.value)}}}),t._v(" "),t.QtyCount?o("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){t.clearInput("QtyCount")}}}):t._e()]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowDetail,expression:"isShowDetail"}]},[o("span",[t._v("托盘编号")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.PID,expression:"PID"}],attrs:{readonly:""},domProps:{value:t.PID},on:{input:function(e){e.target.composing||(t.PID=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"g_switchTab"},[o("div",{staticClass:"previous",on:{click:t.previous}},[o("i",{staticClass:"iconfont icon-xiangzuo1"})]),t._v(" "),o("span",[t._v(t._s(t.CurrIndex)+"/"+t._s(t.totalData))]),t._v(" "),o("div",{staticClass:"next",on:{click:t.next}},[o("i",{staticClass:"iconfont icon-xiangyou1"})])]),t._v(" "),o("span",{staticClass:"g_singleBtn",on:{click:t.confirmOnclick}},[t._v("确认")])]),t._v(" "),t.tipsHide?o("div",{staticClass:"g_tips",on:{touchmove:function(t){t.preventDefault()}}},[o("div",[o("span",[t._v("错误信息")]),t._v(" "),o("span",[t._v(t._s(t.msg))]),t._v(" "),o("p",{on:{ref:t.inputFocus,click:function(e){t.tipsHideen(t.inputFocus)}}},[t._v("确定")])])]):t._e()])},staticRenderFns:[]};var s=function(t){o("zH54")},i=o("VU/8")(a.a,n,!1,s,"data-v-7eb81f24",null);e.default=i.exports},zH54:function(t,e){}});
//# sourceMappingURL=1.f3107720ca717d4ab425.js.map