webpackJsonp([35],{"5QYA":function(t,e){},"5cp9":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("wPYa"),a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ConsignmentNumCollect"},[i("header",[i("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),i("span",[t._v(t._s(t.HeadTitle))]),i("i",{staticClass:"iconfont icon-saoma",on:{click:t.scan}})]),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"fiexedTop"},[i("div",[i("span",[t._v("商品代码")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.input_CommodityCode,expression:"input_CommodityCode"}],staticClass:"readOnly_input",attrs:{readonly:""},domProps:{value:t.input_CommodityCode},on:{input:function(e){e.target.composing||(t.input_CommodityCode=e.target.value)}}})]),t._v(" "),i("div",[i("span",[t._v("商品名称")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input_CommodityName,expression:"input_CommodityName"}],staticClass:"readOnly_input",attrs:{readonly:""},domProps:{value:t.input_CommodityName},on:{input:function(e){e.target.composing||(t.input_CommodityName=e.target.value)}}})]),t._v(" "),i("div",[i("span",[t._v("箱号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.input_BoxNum,expression:"input_BoxNum"}],ref:"input_BoxNum",staticClass:"wideInput",domProps:{value:t.input_BoxNum},on:{focus:function(e){t.g_focus("input_BoxNum")},change:function(e){t.toUppercase("input_BoxNum")},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.Submit_CollectCaseNo(e):null},input:function(e){e.target.composing||(t.input_BoxNum=e.target.value)}}}),t._v(" "),t.input_BoxNum?i("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){t.clearInput("input_BoxNum")}}}):t._e()]),t._v(" "),i("div",[i("span",[t._v("序列号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.input_SerialNum,expression:"input_SerialNum"}],ref:"input_SerialNum",staticClass:"wideInput",staticStyle:{"text-transform":"none"},domProps:{value:t.input_SerialNum},on:{focus:function(e){t.g_focus("input_SerialNum")},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.Submit_SerialNum(e):null},input:function(e){e.target.composing||(t.input_SerialNum=e.target.value)}}}),t._v(" "),t.input_SerialNum?i("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){t.clearInput("input_SerialNum")}}}):t._e()])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"tableContainer"},[i("div",{staticClass:"fixedHeight"},t._l(t.SerialTableArr,function(e,n){return i("div",{key:n,staticClass:"table",attrs:{id:n},on:{click:function(e){t.ShowAll(n)}}},[i("span",[t._v(t._s(e.SerailNo))]),t._v(" "),i("span",[t._v(t._s(e.CaseNo))]),t._v(" "),i("p",{on:{click:function(e){t.deleteSerial(n)}}},[t._v("删除")])])}))])]),t._v(" "),i("div",{staticClass:"bottomNum"},[i("div",[i("span",[t._v(t._s(t.shipmentsText))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.shipmentsNum,expression:"shipmentsNum"}],attrs:{readonly:""},domProps:{value:t.shipmentsNum},on:{input:function(e){e.target.composing||(t.shipmentsNum=e.target.value)}}})]),t._v(" "),i("div",[i("span",[t._v("总采集")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.collectedTotal,expression:"collectedTotal"}],attrs:{readonly:""},domProps:{value:t.collectedTotal},on:{input:function(e){e.target.composing||(t.collectedTotal=e.target.value)}}})]),t._v(" "),i("div",[i("span",[t._v("当前采集")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.collectedNum,expression:"collectedNum"}],attrs:{readonly:""},domProps:{value:t.collectedNum},on:{input:function(e){e.target.composing||(t.collectedNum=e.target.value)}}})])]),t._v(" "),t.tipsHide?i("div",{staticClass:"g_tips",on:{touchmove:function(t){t.preventDefault()}}},[i("div",[i("span",[t._v("错误信息")]),t._v(" "),i("span",[t._v(t._s(t.msg))]),t._v(" "),i("p",{on:{click:function(e){t.tipsHideen(t.inputFocus)}}},[t._v("确定")])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table tableHead"},[e("span",[this._v("序列号")]),this._v(" "),e("span",[this._v("箱号")]),this._v(" "),e("p",[this._v("删除")])])}]};var o=function(t){i("5QYA")},s=i("VU/8")(n.a,a,!1,o,"data-v-06c636d0",null);e.default=s.exports},wPYa:function(t,e,i){"use strict";(function(t){e.a={name:"ConsignmentNumCollect",data:function(){return{input_CommodityCode:"",input_CommodityName:"",input_BoxNum:"",input_SerialNum:"",tipsHide:!1,msg:"",SubmitData:[],SerialTableArr:[],shipmentsNum:0,collectedNum:0,collectedTotal:0,inputFocus:"",thisPage:"Receipt",HeadTitle:"收货序列号采集",shipmentsText:"待收数"}},mounted:function(){this.$refs.input_BoxNum.focus(),window.QRScanAjax=this.QRScanAjax,t("input").attr("maxlength","50")},created:function(){if("Receipt"==this.$store.state.IsConsignOrReceipt?(this.thisPage="Receipt",this.HeadTitle="收货序列号采集",this.shipmentsText="待收数"):"Consignment"==this.$store.state.IsConsignOrReceipt&&(this.thisPage="Consignment",this.HeadTitle="发货序列号采集",this.shipmentsText="发货数"),this.$store.state.Consignment_SubmitData.length){var t=this.$store.state.Consignment_SubmitData;this.input_CommodityCode=t[0].Sku,this.input_CommodityName=t[0].Descr,this.SubmitData=t,this.shipmentsNum=t[0].QtyTotal,this.collectedTotal=t[0].QtyScan}},methods:{QRScanAjax:function(t){var e=this.$store.state.ScanQRCodeInputName;this[e]=t,"input_BoxNum"==e?this.Submit_CollectCaseNo():"input_SerialNum"==e&&this.Submit_SerialNum()},goPrev:function(){this.$router.push({name:"ConsignmentIndex",query:{InvoiceNum:this.SubmitData[0].OrderKey,CommodityCode:this.input_CommodityCode}})},Submit_CollectCaseNo:function(){var t=this;if("Receipt"==this.thisPage)var e=this.HOST+"RFReceiptSerialCollectCaseNo.do";else if("Consignment"==this.thisPage)e=this.HOST+"RFSerialCollectCaseNo.do";var i={OrderKey:this.SubmitData[0].OrderKey,CaseNo:this.input_BoxNum};this.httpRequest(e,i,function(e){t.SerialTableArr=e.data.data,t.collectedNum=t.SerialTableArr.length,t.getFocus("input_SerialNum")},"input_BoxNum")},Submit_SerialNum:function(){var t=this;if(!this.input_SerialNum)return t.tipsShow("input_SerialNum"),t.inputFocus="input_SerialNum",void(t.msg="序列号不能为空");for(var e=0;e<t.SerialTableArr.length;e++)if(t.input_SerialNum==t.SerialTableArr[e].SerailNo)return t.tipsShow("input_SerialNum"),t.inputFocus="input_SerialNum",void(t.msg="序列号已存在");if("Receipt"==this.thisPage)var i=this.HOST+"RFReceiptSerialCollectSave.do";else if("Consignment"==this.thisPage)i=this.HOST+"RFSerialCollectSave.do";var n={OrderKey:this.SubmitData[0].OrderKey,CaseNo:this.input_BoxNum,SerialNo:this.input_SerialNum,Sku:this.SubmitData[0].Sku,StorerKey:this.SubmitData[0].StorerKey};this.httpRequest(i,n,function(e){var i=t.SerialTableArr;console.log(i.length),0==i.length?(console.log(i.length),i=[{CaseNo:t.input_BoxNum,OrderKey:t.SubmitData[0].OrderKey,SerailNo:t.input_SerialNum,Sku:t.SubmitData[0].Sku}]):i.unshift({CaseNo:t.input_BoxNum,OrderKey:t.SubmitData[0].OrderKey,SerailNo:t.input_SerialNum,Sku:t.SubmitData[0].Sku}),t.SerialTableArr=i,console.log(i.length),t.input_SerialNum="",t.collectedNum=t.SerialTableArr.length,t.collectedTotal++},"input_SerialNum")},deleteSerial:function(t){var e=this;if("Receipt"==this.thisPage)var i=this.HOST+"RFReceiptSerialCollectDel.do";else if("Consignment"==this.thisPage)i=this.HOST+"RFSerialCollectDel.do";var n={OrderKey:this.SubmitData[0].OrderKey,CaseNo:this.input_BoxNum,SerialNo:e.SerialTableArr[t].SerailNo};this.httpRequest(i,n,function(i){e.SerialTableArr.splice(t,1),e.collectedNum=e.SerialTableArr.length,e.collectedTotal--})},ShowAll:function(e){console.log(e),t(".tableContainer  .table").eq(e).find("span").css({"text-overflow":"clip","white-space":"pre-wrap",overflow:"auto"})}}}}).call(e,i("7t+N"))}});
//# sourceMappingURL=35.2dff748af7a128b2a223.js.map