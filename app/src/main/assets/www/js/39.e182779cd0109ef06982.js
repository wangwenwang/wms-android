webpackJsonp([39],{"9uPx":function(t,e){},ysNe:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("7t+N"),n=i.n(o),s={name:"ConsignmentIndex",data:function(){return{InvoiceNum:"",CommodityCode:"",tipsHide:!1,msg:"",inputFocus:"",thisPage:"Receipt",HeadTitle:"收货序列号采集",invoiceText:"发货单号"}},mounted:function(){this.$refs.InvoiceNum.focus(),window.QRScanAjax=this.QRScanAjax,n()("input").attr("maxlength","50")},created:function(){this.$route.query.name?"Receipt"==this.$route.query.name?(this.$store.state.IsConsignOrReceipt="Receipt",this.thisPage="Receipt"):"Consignment"==this.$route.query.name&&(this.$store.state.IsConsignOrReceipt="Consignment",this.thisPage="Consignment"):"Receipt"==this.$store.state.IsConsignOrReceipt?this.thisPage="Receipt":"Consignment"==this.$store.state.IsConsignOrReceipt&&(this.thisPage="Consignment"),"Receipt"==this.thisPage?(this.HeadTitle="收货序列号采集",this.invoiceText="收货单号"):"Consignment"==this.thisPage&&(this.HeadTitle="发货序列号采集",this.invoiceText="发货单号"),this.$route.query.InvoiceNum&&(this.InvoiceNum=this.$route.query.InvoiceNum,this.CommodityCode=this.$route.query.CommodityCode)},methods:{QRScanAjax:function(t){var e=this.$store.state.ScanQRCodeInputName;this[e]=t,"InvoiceNum"==e?this.getFocus("CommodityCode"):"CommodityCode"==e&&this.Submit()},Submit:function(){var t=this;if(!this.InvoiceNum)return t.tipsShow("CommodityCode"),t.inputFocus="InvoiceNum",void(t.msg="单号不能为空");if(!this.CommodityCode)return t.tipsShow("CommodityCode"),t.inputFocus="CommodityCode",void(t.msg="商品代码不能为空");if("Receipt"==this.thisPage)var e=this.HOST+"RFReceiptSerialCollectSku.do";else if("Consignment"==this.thisPage)e=this.HOST+"RFSerialCollectSku.do";var i={OrderKey:this.InvoiceNum,Sku:this.CommodityCode};this.httpRequest(e,i,function(e){if(e.data.data.length){if(!e.data.data[0].OrderKey)return t.tipsShow("CommodityCode"),t.inputFocus="InvoiceNum",void(t.msg="此单号不存在");if(!e.data.data[0].Sku)return t.tipsShow("CommodityCode"),t.inputFocus="CommodityCode",void(t.msg="此单中此商品不存在");if(20==e.data.status)return t.tipsShow("CommodityCode"),t.inputFocus="InvoiceNum",void(t.msg="此单已经取消, 不需扫描");t.$store.state.Consignment_SubmitData=e.data.data,t.$router.push({name:"ConsignmentNumCollect",query:{}})}else t.tipsShow("CommodityCode"),t.inputFocus="InvoiceNum",t.msg="未查询到数据"},"InvoiceNum")},ToCheckDetails:function(){var t=this;if(!this.InvoiceNum)return t.tipsShow("InvoiceNum"),t.inputFocus="InvoiceNum",void(t.msg="单号不能为空");if("Receipt"==this.thisPage)var e=this.HOST+"RFReceiptSerialCollectQuery.do";else if("Consignment"==this.thisPage)e=this.HOST+"RFSerialCollectQuery.do";var i={OrderKey:this.InvoiceNum,Sku:this.CommodityCode};this.httpRequest(e,i,function(e){e.data.data.length?(t.$store.state.Consignment_CheckDetailsData=e.data.data,t.$router.push({name:"CheckDetails",query:{InvoiceNum:t.InvoiceNum,CommodityCode:t.CommodityCode}})):(t.tipsShow("InvoiceNum"),t.inputFocus="InvoiceNum",t.msg="未查询到数据")},"InvoiceNum")},toChoiceGoods:function(){var t=this;if(!this.InvoiceNum)return t.tipsShow("InvoiceNum"),t.inputFocus="InvoiceNum",void(t.msg="单号不能为空");if("Receipt"==this.thisPage)var e=this.HOST+"RFReceiptSerialCollectSkuSel.do";else if("Consignment"==this.thisPage)e=this.HOST+"RFSerialCollectSkuSel.do";var i={OrderKey:this.InvoiceNum,Sku:this.CommodityCode};this.httpRequest(e,i,function(e){e.data.data.length?(t.$store.state.Consignment_ChoiceData=e.data.data,t.$router.push({name:"ChoiceGoods",query:{InvoiceNum:t.InvoiceNum,CommodityCode:t.CommodityCode}})):(t.tipsShow("InvoiceNum"),t.inputFocus="InvoiceNum",t.msg="未查询到数据")},"InvoiceNum")}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ConsignmentIndex"},[i("header",[i("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.toIndex}}),i("span",[t._v(t._s(t.HeadTitle))]),i("i",{staticClass:"iconfont icon-saoma",on:{click:t.scan}})]),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"import"},[i("span",[t._v(t._s(t.invoiceText))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.InvoiceNum,expression:"InvoiceNum"}],ref:"InvoiceNum",attrs:{placeholder:"请输入内容"},domProps:{value:t.InvoiceNum},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getFocus("CommodityCode")},change:function(e){t.toUppercase("InvoiceNum")},focus:function(e){t.g_focus("InvoiceNum")},input:function(e){e.target.composing||(t.InvoiceNum=e.target.value)}}}),t._v(" "),t.InvoiceNum?i("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){t.clearInput("InvoiceNum")}}}):t._e()]),t._v(" "),i("div",{staticClass:"import"},[i("span",[t._v("商品代码")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.CommodityCode,expression:"CommodityCode"}],ref:"CommodityCode",attrs:{placeholder:"请输入内容"},domProps:{value:t.CommodityCode},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.Submit(e):null},focus:function(e){t.g_focus("CommodityCode")},change:function(e){t.toUppercase("CommodityCode")},input:function(e){e.target.composing||(t.CommodityCode=e.target.value)}}}),t._v(" "),t.CommodityCode?i("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){t.clearInput("CommodityCode")}}}):t._e(),t._v(" "),i("i",{staticClass:"iconfont icon-sousuo",on:{click:t.toChoiceGoods}})]),t._v(" "),i("div",{staticClass:"g_doubleBtn"},[i("div",{on:{click:t.Submit}},[t._v("确定")]),t._v(" "),i("div",{on:{click:t.ToCheckDetails}},[t._v("查看明细")])])]),t._v(" "),t.tipsHide?i("div",{staticClass:"g_tips",attrs:{id:"g_tips"},on:{touchmove:function(t){t.preventDefault()}}},[i("div",[i("span",[t._v("错误信息")]),t._v(" "),i("span",[t._v(t._s(t.msg))]),t._v(" "),i("p",{on:{click:function(e){t.tipsHideen(t.inputFocus)}}},[t._v("确定")])])]):t._e()])},staticRenderFns:[]};var u=i("VU/8")(s,c,!1,function(t){i("9uPx")},"data-v-9c634e30",null);e.default=u.exports}});
//# sourceMappingURL=39.e182779cd0109ef06982.js.map