webpackJsonp([12],{"1erd":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("em7F"),o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"CheckOrder"},[r("header",[r("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:e.toIndex}}),r("span",[e._v("按装运复核-首页")]),r("i",{staticClass:"iconfont icon-saoma",on:{click:e.scan}})]),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"import"},[r("span",[e._v("装运号")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.OrderKey,expression:"OrderKey"}],ref:"OrderKey",attrs:{placeholder:"请输入内容"},domProps:{value:e.OrderKey},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.check(t):null},focus:function(t){e.g_focus("OrderKey")},input:function(t){t.target.composing||(e.OrderKey=t.target.value)}}}),e._v(" "),e.OrderKey?r("i",{staticClass:"iconfont icon-cuowu",on:{click:function(t){e.clearInput("OrderKey")}}}):e._e()]),e._v(" "),r("div",{staticClass:"import"},[r("span",[e._v("箱号")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.CaseNo,expression:"CaseNo"}],ref:"CaseNo",attrs:{placeholder:"请输入内容"},domProps:{value:e.CaseNo},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.CheckStart(t):null},focus:function(t){e.g_focus("CaseNo")},input:function(t){t.target.composing||(e.CaseNo=t.target.value)}}}),e._v(" "),e.CaseNo?r("i",{staticClass:"iconfont icon-cuowu",on:{click:function(t){e.clearInput("CaseNo")}}}):e._e()]),e._v(" "),r("div",{staticClass:"import"},[r("span",[e._v("商品总数")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.SumQty,expression:"SumQty"}],ref:"SumQty",attrs:{readonly:""},domProps:{value:e.SumQty},on:{input:function(t){t.target.composing||(e.SumQty=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"import"},[r("span",[e._v("商品品相数")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.CountSku,expression:"CountSku"}],ref:"CountSku",attrs:{readonly:""},domProps:{value:e.CountSku},on:{input:function(t){t.target.composing||(e.CountSku=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"import"},[r("span",[e._v("待复核总数")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.SumPreCheckQty,expression:"SumPreCheckQty"}],ref:"SumPreCheckQty",attrs:{readonly:""},domProps:{value:e.SumPreCheckQty},on:{input:function(t){t.target.composing||(e.SumPreCheckQty=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"g_doubleBtn"},[r("div",{on:{click:e.CheckStart}},[e._v("开始复核")]),e._v(" "),r("div",{on:{click:e.checkDetail}},[e._v("查看明细")])])]),e._v(" "),e.tipsHide?r("div",{staticClass:"g_tips",on:{touchmove:function(e){e.preventDefault()}}},[r("div",[r("span",[e._v("错误信息")]),e._v(" "),r("span",[e._v(e._s(e.msg))]),e._v(" "),r("p",{on:{click:function(t){e.tipsHideen(e.inputFocus)}}},[e._v("确定")])])]):e._e()])},staticRenderFns:[]};var s=function(e){r("SPEl")},n=r("VU/8")(a.a,o,!1,s,"data-v-18e6ad5b",null);t.default=n.exports},SPEl:function(e,t){},em7F:function(e,t,r){"use strict";(function(e){t.a={name:"CheckLoad",data:function(){return{OrderKey:"",CaseNo:"",SumQty:"",CountSku:"",tipsHide:!1,msg:"",inputFocus:"",StorerKey:"",CheckOrder:"",StoreKey_select:"",BoxType:"ByLoad",SumCheckedQty:""}},computed:{SumPreCheckQty:function(){return this.SumQty-this.SumCheckedQty}},mounted:function(){window.QRScanAjax=this.QRScanAjax,e("input").attr("maxlength","50"),this.$refs.OrderKey.focus(),this.OrderKey&&(this.check(),this.CaseNo&&this.$refs.CaseNo.select())},created:function(){this.$route.query.OrderKey&&(this.OrderKey=this.$route.query.OrderKey),this.$route.query.CaseNo&&(this.CaseNo=this.$route.query.CaseNo)},methods:{QRScanAjax:function(e){var t=this.$store.state.ScanQRCodeInputName;this[t]=e,"OrderKey"==t?this.check():"CaseNo"==t&&this.CheckStart()},toIndex:function(){this.$router.push({name:"Index"})},check:function(){var e=this;if(""==this.OrderKey)return e.msg="装运号不能为空",e.tipsShow("OrderKey"),e.inputFocus="OrderKey",!1;var t=this.HOST+"RFCheck.do",r={OrderKey:e.OrderKey,BoxType:e.BoxType};this.httpRequest(t,r,function(t){if(t.data.data.length){for(var r=0,a=0,o=0;o<t.data.data.length;o++)r+=t.data.data[o].SumQty,a+=t.data.data[o].CountSku;e.SumQty=r,e.CountSku=a,e.SumCheckedQty=t.data.data[0].SumCheckedQty,e.StorerKey=t.data.data[0].StorerKey,e.OrderKey=t.data.data[0].ExternalLoadId,e.$refs.CaseNo.focus()}else e.tipsShow(""),e.msg="未查询到数据",e.inputFocus="Orderkey"},"OrderKey")},CheckStart:function(){var e=this;if(""==this.OrderKey)return e.msg="装运号不能为空",e.tipsShow("OrderKey"),e.inputFocus="OrderKey",!1;if("02"==this.Status||"04"==this.Status||"09"==this.Status)return e.msg="订单未配货,无法复核",e.tipsShow("OrderKey"),e.inputFocus="OrderKey",!1;if("98"==this.Status||"99"==this.Status)return e.msg="订单已取消,无需复核",e.tipsShow("OrderKey"),e.inputFocus="OrderKey",!1;if(this.SumPreCheckQty<=0)return e.msg="订单已经复核完成,无需再次复核!",e.tipsShow("OrderKey"),e.inputFocus="OrderKey",!1;var t=this.HOST+"RFCheckStart.do",r={OrderKey:e.OrderKey,BoxType:e.BoxType,StorerKey:e.StorerKey,CaseNo:e.CaseNo};this.httpRequest(t,r,function(t){e.$router.push({name:"CheckLoad_check",query:{OrderKey:e.OrderKey,CaseNo:e.CaseNo,StorerKey:e.StorerKey}})})},checkDetail:function(){var e=this;if(""==this.OrderKey)return e.msg="装运号不能为空",e.tipsShow("OrderKey"),e.inputFocus="OrderKey",!1;var t=this.HOST+"RFCheckDetail.do",r={OrderKey:e.OrderKey,BoxType:e.BoxType};this.httpRequest(t,r,function(t){t.data.data.length?(e.$store.state.CheckOrder_detailData=t.data.data,e.$router.push({name:"CheckLoad_detail",query:{OrderKey:e.OrderKey}})):(e.tipsShow(""),e.msg="未查询到数据")})}}}}).call(t,r("7t+N"))}});
//# sourceMappingURL=12.e50bbf2588f9a83041b6.js.map